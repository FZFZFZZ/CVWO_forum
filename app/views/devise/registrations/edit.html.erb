<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
      body {
        font-family: 'Lucida Handwriting', cursive;
        background-color: rgba(244, 244, 244, 1);
        overscroll-behavior-y: none;
        margin-top: 80px !important;
        text-align: left;
      }

      .tag {
        padding: 0em;
        margin: 0em;
        border-radius: 1em;
        display: inline-block;
      }

      .container {
        padding: 40px !important;
        justify-content: center;
        align-items: center;
      }


      .nav-link {
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
      }
      
      .hoverable {
        position: relative;
        display: inline-block;
      }
      
      .tipshown {
        visibility: hidden;
        opacity: 0;
        width: auto;
        max-width: 200px;
        white-space: nowrap;
        padding: 3px 6px;
        background-color: white;
        color: black;
        text-align: center;
        border-radius: 2px;
        position: absolute;
        top: 80%;
        z-index: 10;
        left: -60%;
        transform: translateX(-50%);
        transition: opacity 0.1s, visibility 0.1s;
        font-size: 13px;
      }
      
      
      .hoverable:hover .tipshown {
        visibility: visible;
        opacity: 1;
      }

      .form-group{
        margin-bottom: 10px;
      }

      hr {
        border: none;
        height: 1.5px;
        background-color: grey;
        margin-top: 50px !important;
        margin-bottom: 40px !important;
      }

    </style>

    </head>
  
    <body>
      <%= render partial: 'layouts/navall' %>
    
      <div class="container">
        <h2 style="margin-top: 30px; margin-bottom: 20px;">My Particulars</h2>
    
        <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put, class: 'needs-validation', novalidate: true }) do |    f| %>
    
          <p>
          <%= button_tag type: 'button', class: "btn btn-outline-primary btn-sm", data: { bs_toggle: "collapse", bs_target: "#contactFields" } do %>
            Change Contact Information ▼
          <% end %>
          </p>

          <div class="collapse" id="contactFields">
            <div class="form-group">
              <%= f.label :username %>
              <%= f.text_field :username, autofocus: true, class: 'form-control' %>
            </div>
      
            <div class="form-group">
              <%= f.label :email %>
              <%= f.email_field :email, autofocus: true, autocomplete: "email", class: 'form-control' %>
            </div>

            <div class="form-group">
              <%= f.label :instagram %>
              <%= f.text_field :instagram, class: 'form-control' %>
            </div>
      
            <div class="form-group">
              <%= f.label :phone %>
              <%= f.telephone_field :phone, class: 'form-control' %>
            </div>

          </div>
    
          <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
            <div class="form-group">
              <p>Currently waiting confirmation for: <%= resource.unconfirmed_email %></p>
            </div>
          <% end %>
          
          <p>
          <%= button_tag type: 'button', class: "btn btn-outline-primary btn-sm", data: { bs_toggle: "collapse", bs_target: "#passwordFields" } do %>
            Change Password ▼
          <% end %>
          </p>
    
          <div class="collapse" id="passwordFields">
            <div class="form-group">
              <%= f.label :password, "New Password" %>
              <% if @minimum_password_length %>
                <i style="font-size: 12px; color: grey;">(<%= @minimum_password_length %> characters minimum)</i>
              <% end %>
              <%= f.password_field :password, autocomplete: "new-password", class: 'form-control' %>
            </div>
  
            <div class="form-group">
              <%= f.label :password_confirmation, "Confirm New Password" %>
              <%= f.password_field :password_confirmation, autocomplete: "new-password", class: 'form-control' %>
            </div>
          </div>
    

          <p>
          <%= button_tag type: 'button', class: "btn btn-outline-primary btn-sm", data: { bs_toggle: "collapse", bs_target: "#privacyFields" } do %>
            Change Privacy Settings ▼
          <% end %>
          </p>

          <div class="collapse" id="privacyFields">
            <div class="form-check">
              <%= f.check_box :favshare, class: 'form-check-input' %>
              <%= f.label :favshare, 'Make Favourites Public', class: 'form-check-label' %>
            </div>
      
            <div class="form-check">
              <%= f.check_box :contactshare, class: 'form-check-input' %>
              <%= f.label :contactshare, 'Make Contact Information Public', class: 'form-check-label' %>
              <i style="font-size: 12px; color: grey;">(Email, Instagram and Phone Number)</i>
            </div>
      
            <div class="form-check">
              <%= f.check_box :historyshare, class: 'form-check-input' %>
              <%= f.label :historyshare, 'Make History Public', class: 'form-check-label' %>
              <i style="font-size: 12px; color: grey;">("Recently Commented" and "Rating History")</i>
            </div>
          </div>

          <div class="form-group">
            <%= f.label :current_password, "Current Password"%> <i style="font-size: 12px; color: grey;">(to confirm your changes)</i>
            <%= f.password_field :current_password, autocomplete: "current-password", class: 'form-control' %>
          </div>

          <div class="actions mt-3">
            <%= f.submit "Update", class: 'btn btn-primary mt-2' %>
          </div>
          
          &nbsp;

          <%= render "devise/shared/error_messages", resource: resource %>

        <% end %>
    
        <hr>
    
        <div>
          <%= button_to "Cancel my account", registration_path(resource_name), data: { confirm: "Are you sure?", turbo_confirm: "Are you sure?" }, method: :delete    , class: 'btn btn-danger btn-sm' %>
        </div>
      </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    </body>

</html>
