
<% like = current_user.likes.find_by(likeable: likeable) %>
<% if like.nil? %>
  <%# <%= button_to "Like", likes_path, params: {like: {article_id: @article.id}}, method: :post %>
  <form action = '/likes' method = 'post'>
    <input type = 'hidden' name = 'authenticity_token' value = '<%= form_authenticity_token %>'>
    <input type = "hidden" name = "like[likeable_id]" value = '<%= likeable.id %>'>
    <input type = "hidden" name = "like[likeable_type]" value = '<%= likeable.class.to_s %>'>
    <% if likeable.class.to_s == 'Article' %>
      <input type = "submit" value = "Add to My Favorites">
    <% else %>
      <input type = "submit" value = "Like">
    <% end %>
  </form>
<% else %>
  <%# <%= button_to "Unlike", like_path(like), method: :delete %> 
  <form action = '<%= like_path(like) %>' method = 'post'>
    <input type = 'hidden' name = 'authenticity_token' value = '<%= form_authenticity_token %>'>
    <input type = "hidden" name = "_method" value = 'DELETE'>
    <% if likeable.class.to_s == 'Article' %>
      <input type = "submit" value = "Remove from My Favorites">
    <% else %>
      <input type = "submit" value = "Unlike">
    <% end %>
  </form>
<% end %>

<%= likeable.likes.count %> Likes